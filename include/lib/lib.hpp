#ifndef LIB_HPP
#define LIB_HPP

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#include <stdio.h>
#include <stdlib.h>

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#ifdef _DEBUG
    #define ON_DEBUG(...) __VA_ARGS__
    #define OFF_DEBUG(...)

    #define PRINT_PLACE() PrintPlace(__FILE__, __LINE__, __func__)
#else // _DEBUG
    #define ON_DEBUG(...)
    #define OFF_DEBUG(...) __VA_ARGS__

    #define PRINT_PLACE()
#endif // _DEBUG


//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#define WHITE   "\e[0;37m"
#define BLUE    "\e[0;34m"
#define RED     "\x1b[31m"
#define GREEN   "\x1b[32m"
#define VIOLET  "\e[0;35m"
#define CYAN    "\e[0;36m"
#define YELLOW  "\e[0;33m"
#define RESET   "\x1b[0m"

#define COLOR_PRINT(COLOR, ...) do  \
{                                    \
    printf(COLOR);                    \
    printf(__VA_ARGS__);               \
    printf(RESET);                      \
} while (0)                              \

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

struct CodePlace
{
    const char* file;
    int         line;
    const char* func;
};

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

void PrintPlace     (                  const char* const file, const int line, const char* const func);
void CodePlaceCtor  (CodePlace* place, const char* const file, const int line, const char* const func);

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#define EXIT(exit_status, ...) do {if (exit_status != EXIT_SUCCESS) { COLOR_PRINT(RED, __VA_ARGS__); printf("\n"); PRINT_PLACE(); printf("\n"); } exit(exit_status); } while(0)

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#define RETURN_IF_FALSE(flag, returnElem, ...) \
if (!(flag))                                    \
{                                                \
    __VA_ARGS__;                                  \
    return returnElem;                             \
}                                                   \

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#define RETURN_IF_TRUE(flag, returnElem, ...) \
if ((flag))                                    \
{                                               \
    __VA_ARGS__;                                 \
    return returnElem;                            \
}     

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#define FREE(ptr) free((char*)ptr); ptr = NULL;

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#endif //LIB_HPP